{"version":3,"file":"activity-datail.js","sources":["pages/circle/activity-datail/activity-datail.vue","../../../Software/hbuilder/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvY2lyY2xlL2FjdGl2aXR5LWRhdGFpbC9hY3Rpdml0eS1kYXRhaWwudnVl"],"sourcesContent":["<template>\r\n\t<view v-if=\"activity._id\" class=\"activity-detail-container\">\r\n\t\t<!-- 活动封面 -->\r\n\t\t<view class=\"activity-cover\" :class=\"{ 'fade-in': coverShow }\">\r\n\t\t\t<image :src=\"activity.image\" mode=\"aspectFill\" class=\"cover-image\"></image>\r\n\t\t\t<view class=\"cover-mask\"></view>\r\n\t\t\t<view class=\"activity-status animated-bounce\" :class=\"getStatusClass(activity)\">\r\n\t\t\t\t<text>{{ getStatusText(activity) }}</text>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<!-- 活动基本信息 -->\r\n\t\t<view class=\"activity-basic-info card-ani\">\r\n\t\t\t<view class=\"activity-tag\" :class=\"activity.tagClass\">{{\r\n        activity.tag\r\n      }}</view>\r\n\t\t\t<view class=\"activity-title\">{{ activity.title }}</view>\r\n\r\n\t\t\t<view class=\"info-item\">\r\n\t\t\t\t<text class=\"iconfont icon-shijian\"></text>\r\n\t\t\t\t<text class=\"info-text\">{{ formatDate(activity.date) }} {{ activity.time }}</text>\r\n\t\t\t</view>\r\n\r\n\t\t\t<view class=\"info-item\">\r\n\t\t\t\t<text class=\"iconfont icon-location\"></text>\r\n\t\t\t\t<text class=\"info-text\">{{ activity.location }}</text>\r\n\t\t\t</view>\r\n\r\n\t\t\t<view class=\"info-item\">\r\n\t\t\t\t<text class=\"iconfont icon-huodong\"></text>\r\n\t\t\t\t<text class=\"info-text\">已有 {{ activity.participants }} 人参与</text>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<!-- 活动详情 -->\r\n\t\t<view class=\"activity-detail-section card-ani\">\r\n\t\t\t<view class=\"section-title\">\r\n\t\t\t\t<text class=\"title-text\">活动详情</text>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"activity-description\">\r\n\t\t\t\t<rich-text :nodes=\"activity.content || '暂无详细描述'\"></rich-text>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<!-- 参与人员 -->\r\n\t\t<view class=\"activity-detail-section card-ani\" v-if=\"activity.avatars && activity.avatars.length > 0\">\r\n\t\t\t<view class=\"section-title\">\r\n\t\t\t\t<text class=\"title-text\">参与人员</text>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"participants\">\r\n\t\t\t\t<image v-for=\"(avatar, index) in activity.avatars\" :key=\"index\" :src=\"avatar\"\r\n\t\t\t\t\tclass=\"participant-avatar\"></image>\r\n\t\t\t\t<view class=\"more-participants\" v-if=\"activity.participants > activity.avatars.length\">\r\n\t\t\t\t\t<text>+{{ activity.participants - activity.avatars.length }}</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<!-- 相关活动推荐 -->\r\n\t\t<view class=\"activity-detail-section card-ani\">\r\n\t\t\t<view class=\"section-title\">\r\n\t\t\t\t<text class=\"title-text\">相关活动</text>\r\n\t\t\t</view>\r\n\t\t\t<scroll-view class=\"related-activities\" scroll-x=\"true\" show-scrollbar=\"false\">\r\n\t\t\t\t<view v-for=\"(item, index) in relatedActivities\" :key=\"index\"\r\n\t\t\t\t\tclass=\"related-activity-item animated-scale\" @tap=\"viewRelatedActivity(item)\">\r\n\t\t\t\t\t<image :src=\"item.image\" mode=\"aspectFill\" class=\"related-activity-image\"></image>\r\n\t\t\t\t\t<view class=\"related-activity-info\">\r\n\t\t\t\t\t\t<text class=\"related-activity-title\">{{ item.title }}</text>\r\n\t\t\t\t\t\t<text class=\"related-activity-time\">{{\r\n              formatDate(item.date)\r\n            }}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</scroll-view>\r\n\t\t</view>\r\n\r\n\t\t<!-- 底部操作栏 -->\r\n\t\t<view class=\"footer-bar card-ani\">\r\n\t\t\t<view class=\"action-btns\">\r\n\t\t\t\t<button\r\n\t\t\t\t\tv-if=\"isCurrentUser\"\r\n\t\t\t\t\tclass=\"action-btn clickable-mp\"\r\n\t\t\t\t\t@tap=\"editActivity\"\r\n\t\t\t\t>编辑活动</button>\r\n\t\t\t\t<button\r\n\t\t\t\t\tv-else\r\n\t\t\t\t\tclass=\"action-btn clickable-mp\"\r\n\t\t\t\t\t@tap=\"viewOrganizer\"\r\n\t\t\t\t>主办方介绍</button>\r\n\t\t\t\t<!-- 参与按钮保持不变 -->\r\n\t\t\t\t<button class=\"action-btn primary clickable-mp\" v-if=\"canJoin(activity)\" @tap=\"joinActivity\">\r\n\t\t\t\t\t立即参与\r\n\t\t\t\t</button>\r\n\t\t\t\t<button class=\"action-btn disabled\" v-else>\r\n\t\t\t\t\t{{ activity.status === \"ended\" ? \"已结束\" : \"已参与\" }}\r\n\t\t\t\t</button>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n\t<view v-else class=\"loading\">\r\n\t\t<text class=\"iconfont icon-loading loading-icon\"></text>\r\n\t\t<text class=\"text-sm text-gray\">加载活动详情...</text>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tid: null,\r\n\t\t\t\tactivity: {}, // 初始化为空对象避免渲染错误\r\n\t\t\t\trelatedActivities: [{\r\n\t\t\t\t\t\tid: 2,\r\n\t\t\t\t\t\timage: \"/static/images/activity2.png\",\r\n\t\t\t\t\t\ttitle: \"创新创业大赛\",\r\n\t\t\t\t\t\tdate: new Date(new Date().getTime() + 5 * 24 * 60 * 60 * 1000), // 5天后\r\n\t\t\t\t\t\tstatus: \"upcoming\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 3,\r\n\t\t\t\t\t\timage: \"/static/images/activity1.png\",\r\n\t\t\t\t\t\ttitle: \"校园歌手大赛\",\r\n\t\t\t\t\t\tdate: new Date(new Date().getTime() + 2 * 24 * 60 * 60 * 1000), // 2天后\r\n\t\t\t\t\t\tstatus: \"upcoming\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 4,\r\n\t\t\t\t\t\timage: \"/static/images/activity2.png\",\r\n\t\t\t\t\t\ttitle: \"篮球联赛\",\r\n\t\t\t\t\t\tdate: new Date(new Date().getTime() + 7 * 24 * 60 * 60 * 1000), // 7天后\r\n\t\t\t\t\t\tstatus: \"upcoming\",\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t\tstatusBarHeight: 0,\r\n\t\t\t\tmenuButtonHeight: 0,\r\n\t\t\t\tmenuButtonLeft: 0,\r\n\t\t\t\tmenuButtonRight: 0,\r\n\t\t\t\theaderHeight: 0,\r\n\t\t\t\tcoverShow: false,\r\n\t\t\t\tcurrentUserId: null, // 新增：当前登录用户ID\r\n\t\t\t\tisCurrentUser: false, // 新增：是否是活动发布者标识\r\n\t\t\t};\r\n\t\t},\r\n\t\tonLoad(options) {\r\n\t\t\t// 替换为微信推荐的uni.getWindowInfo获取窗口信息\r\n\t\t\tconst windowInfo = uni.getWindowInfo(); // 替代原uni.getSystemInfoSync()\r\n\t\t\tconst menuButton = uni.getMenuButtonBoundingClientRect();\r\n\t\t\tthis.statusBarHeight = windowInfo.statusBarHeight; // 从windowInfo中获取状态栏高度\r\n\t\t\tthis.menuButtonHeight = menuButton.height;\r\n\t\t\tthis.menuButtonLeft = menuButton.left;\r\n\t\t\tthis.menuButtonRight = menuButton.right;\r\n\t\t\tthis.headerHeight = windowInfo.statusBarHeight + menuButton.height; // 使用windowInfo的statusBarHeight\r\n\t\t\tif (options.id) {\r\n\t\t\t\tthis.id = options.id;\r\n\t\t\t\tthis.loadActivityDetail(); // 加载详情数据\r\n\t\t\t}\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tthis.coverShow = true;\r\n\t\t\t}, 100);\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t//编辑活动跳转方法\r\n\t\t\teditActivity() {\r\n\t\t\t\tconsole.log('编辑活动')\r\n\t\t\t\t// 只传递需要编辑的字段，避免冗余\r\n\t\t\t\tconst activity = encodeURIComponent(JSON.stringify({\r\n\t\t\t\t\t_id: this.activity._id,\r\n\t\t\t\t\ttitle: this.activity.title,\r\n\t\t\t\t\tcontent: this.activity.content,\r\n\t\t\t\t\tactivity_time: this.activity.activity_time || (this.activity.date && this.activity.date\r\n\t\t\t\t\t\t.getTime()),\r\n\t\t\t\t\tlocation: this.activity.location,\r\n\t\t\t\t\tmax_attendees: this.activity.max_attendees,\r\n\t\t\t\t\ttags: this.activity.tags,\r\n\t\t\t\t\tfiles: this.activity.files || (this.activity.image ? [this.activity.image] : []),\r\n\t\t\t\t\tcategory: this.activity.category\r\n\t\t\t\t}));\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: `/pages/circle/addactivities/addactivities?activity=${activity}`\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\t//主办方介绍提示\r\n\t\t\tviewOrganizer() {\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t\ttitle: '提示',\r\n\t\t\t\t\tcontent: '主办方介绍功能暂未开通，敬请期待~',\r\n\t\t\t\t\tshowCancel: false\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t// 加载活动详情数据\r\n\t\t\tasync loadActivityDetail() {\r\n\t\t\t\ttry {\r\n\t\t\t\t\t// 1. 获取当前用户ID（通过解析uni_id_token）\r\n\t\t\t\t\tconst token = uni.getStorageSync('uni_id_token');\r\n\t\t\t\t\tif (token) {\r\n\t\t\t\t\t\tconst decodedToken = JSON.parse(atob(token.split('.')[1])); // 解析JWT payload\r\n\t\t\t\t\t\tthis.currentUserId = decodedToken.uid; // uni-id的用户ID存储在uid字段\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// 2. 查询活动详情（原有逻辑）\r\n\t\t\t\t\tconst res = await uniCloud.database().collection(\"add-content\").doc(this.id).get();\r\n\t\t\t\t\tif (res.result.data && res.result.data.length > 0) {\r\n\t\t\t\t\t\tconst rawActivity = res.result.data[0];\r\n\t\t\t\t\t\t// 3. 判断是否是当前用户发布的活动\r\n\t\t\t\t\t\tthis.isCurrentUser = this.currentUserId === rawActivity.user_id;\r\n\t\t\t\t\t\t// 4.获取发布者信息\r\n\t\t\t\t\t\tconst userRes = await uniCloud.database().collection(\"uni-id-users\").doc(rawActivity.user_id)\r\n\t\t\t\t\t\t\t.field(\"avatar_file,nickname\").get();\r\n\t\t\t\t\t\tthis.activity = {\r\n\t\t\t\t\t\t\t...rawActivity,\r\n\t\t\t\t\t\t\tdate: new Date(rawActivity.activity_time), // 完整日期对象\r\n\t\t\t\t\t\t\t// time: this.formatTime(rawActivity.activity_time),  // 单独时间部分\r\n\t\t\t\t\t\t\tparticipants: rawActivity.attendee_count || 0, // 从数据库字段映射\r\n\t\t\t\t\t\t\ttagClass: this.getTagClass(rawActivity.category), // 新增tagClass映射\r\n\t\t\t\t\t\t\tavatar: userRes.result.data[0]?.avatar_file?.url ||\r\n\t\t\t\t\t\t\t\t\"/static/images/default-avatar.png\",\r\n\t\t\t\t\t\t\timage: rawActivity.files?.[0] || \"/static/images/activity-default.png\", // 取files第一张图\r\n\t\t\t\t\t\t\tpublisher: userRes.result.data[0]?.nickname || \"匿名发布者\",\r\n\t\t\t\t\t\t\tformattedDate: this.formatDate(rawActivity.create_time), // 使用统一日期格式化\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: \"活动不存在\",\r\n\t\t\t\t\t\t\ticon: \"none\"\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tuni.navigateBack();\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (err) {\r\n\t\t\t\t\tconsole.error(\"加载活动详情失败\", err);\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: \"加载失败，请重试\",\r\n\t\t\t\t\t\ticon: \"none\"\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//标签类名映射方法\r\n\t\t\tgetTagClass(category) {\r\n\t\t\t\tconst tagMap = {\r\n\t\t\t\t\t官方: \"official\",\r\n\t\t\t\t\t社团: \"club\",\r\n\t\t\t\t\t学术: \"academic\",\r\n\t\t\t\t\t娱乐: \"entertainment\",\r\n\t\t\t\t\t体育: \"sports\",\r\n\t\t\t\t};\r\n\t\t\t\treturn tagMap[category] || \"\";\r\n\t\t\t},\r\n\t\t\t// 状态判断方法\r\n\t\t\t// 状态文本映射方法（修改核心逻辑）\r\n\t\t\tgetStatusText(item) {\r\n\t\t\t\tconst currentTime = new Date().getTime(); // 当前时间戳\r\n\t\t\t\tconst activityTime = item.date.getTime(); // 活动开始时间戳\r\n\r\n\t\t\t\tif (currentTime < activityTime) {\r\n\t\t\t\t\treturn \"即将开始\";\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn \"已结束\";\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t// 参与权限判断（同步调整）\r\n\t\t\tcanJoin(item) {\r\n\t\t\t\tconst currentTime = new Date().getTime();\r\n\t\t\t\tconst activityTime = item.date.getTime();\r\n\t\t\t\treturn currentTime < activityTime; // 活动开始前允许参与\r\n\t\t\t},\r\n\t\t\t// 参与活动（关键修改）\r\n\t\t\tasync joinActivity(item) {\r\n\t\t\t\tconsole.log('参与活动', item);\r\n\t\t\t\tconsole.log(\"活动信息\", this.activity)\r\n\t\t\t\ttry {\r\n\t\t\t\t\t// 检查登录状态\r\n\t\t\t\t\tconst token = uni.getStorageSync('uni_id_token');\r\n\t\t\t\t\tif (!token) {\r\n\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\ttitle: '提示',\r\n\t\t\t\t\t\t\tcontent: '请先登录后再参与活动',\r\n\t\t\t\t\t\t\tconfirmText: '去登录',\r\n\t\t\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\t\t\t\turl: '/pages/login/login'\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// 调用云函数\r\n\t\t\t\t\tconst res = await uniCloud.callFunction({\r\n\t\t\t\t\t\tname: 'joinactivity',\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\tactivityId: this.activity._id,\r\n\t\t\t\t\t\t\ttoken: token\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tif (res.result.success) {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: '参与成功',\r\n\t\t\t\t\t\t\ticon: 'success'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tthis.onRefresh();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// 处理特定的错误码\r\n\t\t\t\t\t\tif (res.result.code === 'TOKEN_INVALID') {\r\n\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\ttitle: '提示',\r\n\t\t\t\t\t\t\t\tcontent: '登录状态已失效，请重新登录',\r\n\t\t\t\t\t\t\t\tconfirmText: '去登录',\r\n\t\t\t\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\t\t\t\t\turl: '/pages/login/login'\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: res.result.message || '参与失败',\r\n\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (err) {\r\n\t\t\t\t\tconsole.error('参与活动失败', err);\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '参与失败，请稍后重试',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgetStatusClass(item) {\r\n\t\t\t\tconst currentTime = new Date().getTime();\r\n\t\t\t\tconst activityTime = item.date.getTime();\r\n\t\t\t\treturn currentTime < activityTime ? \"status-upcoming\" : \"status-ended\"; // 匹配CSS中的类名\r\n\t\t\t},\r\n\t\t\t// 日期格式化优化（原有方法增强）\r\n\t\t\tformatDate(ts) {\r\n\t\t\t\tconst date = new Date(ts);\r\n\t\t\t\tconst year = date.getFullYear();\r\n\t\t\t\tconst month = (date.getMonth() + 1).toString().padStart(2, \"0\"); // 月份从0开始，+1后补零\r\n\t\t\t\tconst day = date.getDate().toString().padStart(2, \"0\");\r\n\t\t\t\tconst hours = date.getHours().toString().padStart(2, \"0\");\r\n\t\t\t\tconst minutes = date.getMinutes().toString().padStart(2, \"0\");\r\n\t\t\t\t// 返回完整格式：年-月-日 时:分（如2024-06-15 14:30）\r\n\t\t\t\treturn `${year}-${month}-${day} ${hours}:${minutes}`;\r\n\t\t\t}\r\n\t\t},\r\n\t};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n\t@import \"@/styles/variables.scss\";\r\n\t@import \"@/styles/common.scss\";\r\n\t@import \"@/styles/platform-mp.scss\";\r\n\r\n\t.activity-detail-container {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tmin-height: 100vh;\r\n\t\tbackground-color: #f8f9fc;\r\n\t\tpadding-top: 0;\r\n\t}\r\n\r\n\t// 封面淡入动画\r\n\t.activity-cover {\r\n\t\tposition: relative;\r\n\t\theight: 500rpx;\r\n\t\twidth: 100%;\r\n\t\topacity: 0;\r\n\t\ttransition: opacity 0.8s cubic-bezier(0.4, 0, 0.2, 1);\r\n\r\n\t\t&.fade-in {\r\n\t\t\topacity: 1;\r\n\t\t}\r\n\r\n\t\t.cover-image {\r\n\t\t\twidth: 100%;\r\n\t\t\theight: 100%;\r\n\t\t\tborder-radius: 0 0 32rpx 32rpx;\r\n\t\t\tbox-shadow: 0 8rpx 32rpx rgba(0, 0, 0, 0.1);\r\n\t\t}\r\n\r\n\t\t.cover-mask {\r\n\t\t\tposition: absolute;\r\n\t\t\ttop: 0;\r\n\t\t\tleft: 0;\r\n\t\t\tright: 0;\r\n\t\t\tbottom: 0;\r\n\t\t\tbackground: linear-gradient(to bottom,\r\n\t\t\t\t\trgba(0, 0, 0, 0.18),\r\n\t\t\t\t\trgba(0, 0, 0, 0.45));\r\n\t\t\tborder-radius: 0 0 32rpx 32rpx;\r\n\t\t}\r\n\r\n\t\t.activity-status {\r\n\t\t\tposition: absolute;\r\n\t\t\tright: 30rpx;\r\n\t\t\tbottom: 80rpx;\r\n\t\t\tpadding: 10rpx 30rpx;\r\n\t\t\tborder-radius: 30rpx;\r\n\t\t\tfont-size: 24rpx;\r\n\t\t\tfont-weight: bold;\r\n\t\t\tbox-shadow: 0 4rpx 16rpx rgba($primary-color, 0.1);\r\n\t\t\tanimation: bounceIn 0.8s;\r\n\r\n\t\t\t&.upcoming {\r\n\t\t\t\tbackground: linear-gradient(90deg,\r\n\t\t\t\t\t\t$primary-color,\r\n\t\t\t\t\t\tlighten($primary-color, 10%));\r\n\t\t\t\tcolor: #fff;\r\n\t\t\t}\r\n\r\n\t\t\t&.ongoing {\r\n\t\t\t\tbackground: linear-gradient(90deg,\r\n\t\t\t\t\t\t$success-color,\r\n\t\t\t\t\t\tlighten($success-color, 10%));\r\n\t\t\t\tcolor: #fff;\r\n\t\t\t}\r\n\r\n\t\t\t&.ended {\r\n\t\t\t\tbackground: linear-gradient(90deg, #999, #bbb);\r\n\t\t\t\tcolor: #fff;\r\n\t\t\t}\r\n\r\n\t\t\t&.status-upcoming {\r\n\t\t\t\tbackground: linear-gradient(90deg,\r\n\t\t\t\t\t\t$primary-color,\r\n\t\t\t\t\t\tlighten($primary-color, 10%));\r\n\t\t\t\tcolor: #fff;\r\n\t\t\t}\r\n\r\n\t\t\t&.status-ongoing {\r\n\t\t\t\tbackground: linear-gradient(90deg,\r\n\t\t\t\t\t\t$success-color,\r\n\t\t\t\t\t\tlighten($success-color, 10%));\r\n\t\t\t\tcolor: #fff;\r\n\t\t\t}\r\n\r\n\t\t\t&.status-ended {\r\n\t\t\t\tbackground: linear-gradient(90deg, #999, #bbb);\r\n\t\t\t\tcolor: #fff;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t@keyframes bounceIn {\r\n\t\t0% {\r\n\t\t\ttransform: translateY(40rpx) scale(0.8);\r\n\t\t\topacity: 0;\r\n\t\t}\r\n\r\n\t\t60% {\r\n\t\t\ttransform: translateY(-10rpx) scale(1.05);\r\n\t\t\topacity: 1;\r\n\t\t}\r\n\r\n\t\t80% {\r\n\t\t\ttransform: translateY(0) scale(0.97);\r\n\t\t}\r\n\r\n\t\t100% {\r\n\t\t\ttransform: translateY(0) scale(1);\r\n\t\t}\r\n\t}\r\n\r\n\t// 卡片内容淡入动画\r\n\t.card-ani {\r\n\t\topacity: 0;\r\n\t\ttransform: translateY(40rpx);\r\n\t\tanimation: cardFadeIn 0.7s 0.2s forwards;\r\n\t}\r\n\r\n\t@keyframes cardFadeIn {\r\n\t\tto {\r\n\t\t\topacity: 1;\r\n\t\t\ttransform: translateY(0);\r\n\t\t}\r\n\t}\r\n\r\n\t.activity-basic-info {\r\n\t\tmargin-top: -60rpx;\r\n\t\tmargin-horizontal: 30rpx;\r\n\t\tpadding: 30rpx;\r\n\t\tbackground: #fff;\r\n\t\tborder-radius: 24rpx;\r\n\t\tbox-shadow: 0 8rpx 32rpx rgba(0, 0, 0, 0.1);\r\n\t\tposition: relative;\r\n\t\tz-index: 10;\r\n\t\ttransition: box-shadow 0.3s;\r\n\r\n\t\t.activity-tag {\r\n\t\t\tdisplay: inline-block;\r\n\t\t\tpadding: 6rpx 20rpx;\r\n\t\t\tborder-radius: 20rpx;\r\n\t\t\tfont-size: 24rpx;\r\n\t\t\tmargin-bottom: 16rpx;\r\n\t\t\tfont-weight: 500;\r\n\t\t\tletter-spacing: 2rpx;\r\n\t\t\tbox-shadow: 0 2rpx 8rpx rgba($primary-color, 0.08);\r\n\r\n\t\t\t&.official {\r\n\t\t\t\tbackground-color: rgba($primary-color, 0.1);\r\n\t\t\t\tcolor: $primary-color;\r\n\t\t\t}\r\n\r\n\t\t\t&.club {\r\n\t\t\t\tbackground-color: rgba(#5b2ee6, 0.1);\r\n\t\t\t\tcolor: #5b2ee6;\r\n\t\t\t}\r\n\r\n\t\t\t&.academic {\r\n\t\t\t\tbackground-color: rgba(#06a788, 0.1);\r\n\t\t\t\tcolor: #06a788;\r\n\t\t\t}\r\n\r\n\t\t\t&.entertainment {\r\n\t\t\t\tbackground-color: rgba($warning-color, 0.1);\r\n\t\t\t\tcolor: $warning-color;\r\n\t\t\t}\r\n\r\n\t\t\t&.sports {\r\n\t\t\t\tbackground-color: rgba(#ff3366, 0.1);\r\n\t\t\t\tcolor: #ff3366;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.activity-title {\r\n\t\t\tfont-size: 40rpx;\r\n\t\t\tfont-weight: bold;\r\n\t\t\tcolor: $primary-color;\r\n\t\t\tmargin-bottom: 24rpx;\r\n\t\t\tline-height: 1.3;\r\n\t\t\tletter-spacing: 2rpx;\r\n\t\t}\r\n\r\n\t\t.info-item {\r\n\t\t\tdisplay: flex;\r\n\t\t\talign-items: center;\r\n\t\t\tmargin-bottom: 16rpx;\r\n\r\n\t\t\t&:last-child {\r\n\t\t\t\tmargin-bottom: 0;\r\n\t\t\t}\r\n\r\n\t\t\t.iconfont {\r\n\t\t\t\tfont-size: 28rpx;\r\n\t\t\t\tcolor: $primary-color;\r\n\t\t\t\tmargin-right: 12rpx;\r\n\t\t\t}\r\n\r\n\t\t\t.info-text {\r\n\t\t\t\tfont-size: 28rpx;\r\n\t\t\t\tcolor: #666;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t.activity-detail-section {\r\n\t\tmargin: 30rpx;\r\n\t\tpadding: 30rpx;\r\n\t\tbackground: #fff;\r\n\t\tborder-radius: 24rpx;\r\n\t\tbox-shadow: 0 4rpx 16rpx rgba(0, 0, 0, 0.06);\r\n\t\tanimation: cardFadeIn 0.7s 0.3s both;\r\n\r\n\t\t.section-title {\r\n\t\t\tmargin-bottom: 20rpx;\r\n\t\t\tposition: relative;\r\n\r\n\t\t\t&:after {\r\n\t\t\t\tcontent: \"\";\r\n\t\t\t\tposition: absolute;\r\n\t\t\t\tleft: 0;\r\n\t\t\t\tbottom: -10rpx;\r\n\t\t\t\twidth: 60rpx;\r\n\t\t\t\theight: 4rpx;\r\n\t\t\t\tbackground: $primary-color;\r\n\t\t\t\tborder-radius: 2rpx;\r\n\t\t\t}\r\n\r\n\t\t\t.title-text {\r\n\t\t\t\tfont-size: 32rpx;\r\n\t\t\t\tfont-weight: bold;\r\n\t\t\t\tcolor: #333;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.activity-description {\r\n\t\t\tfont-size: 28rpx;\r\n\t\t\tcolor: #666;\r\n\t\t\tline-height: 1.6;\r\n\t\t}\r\n\t}\r\n\r\n\t.participants {\r\n\t\tdisplay: flex;\r\n\t\tflex-wrap: wrap;\r\n\t\talign-items: center;\r\n\r\n\t\t.participant-avatar {\r\n\t\t\twidth: 80rpx;\r\n\t\t\theight: 80rpx;\r\n\t\t\tborder-radius: 50%;\r\n\t\t\tmargin-right: 16rpx;\r\n\t\t\tmargin-bottom: 16rpx;\r\n\t\t\tborder: 2rpx solid #fff;\r\n\t\t\tbox-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.1);\r\n\t\t\ttransition: box-shadow 0.3s;\r\n\t\t}\r\n\r\n\t\t.more-participants {\r\n\t\t\twidth: 80rpx;\r\n\t\t\theight: 80rpx;\r\n\t\t\tborder-radius: 50%;\r\n\t\t\tdisplay: flex;\r\n\t\t\talign-items: center;\r\n\t\t\tjustify-content: center;\r\n\t\t\tbackground: #f5f5f5;\r\n\t\t\tcolor: #666;\r\n\t\t\tfont-size: 24rpx;\r\n\t\t\tmargin-right: 16rpx;\r\n\t\t\tmargin-bottom: 16rpx;\r\n\t\t}\r\n\t}\r\n\r\n\t.related-activities {\r\n\t\twhite-space: nowrap;\r\n\t\tmargin: 0 -10rpx;\r\n\t}\r\n\r\n\t.related-activity-item {\r\n\t\tdisplay: inline-block;\r\n\t\twidth: 300rpx;\r\n\t\tmargin: 0 10rpx;\r\n\t\tborder-radius: 16rpx;\r\n\t\toverflow: hidden;\r\n\t\tbackground: #fff;\r\n\t\tbox-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.08);\r\n\t\ttransition: transform 0.2s, box-shadow 0.2s;\r\n\r\n\t\t&:active {\r\n\t\t\ttransform: scale(1.04);\r\n\t\t\tbox-shadow: 0 4rpx 16rpx rgba(0, 0, 0, 0.12);\r\n\t\t}\r\n\r\n\t\t.related-activity-image {\r\n\t\t\twidth: 100%;\r\n\t\t\theight: 160rpx;\r\n\t\t\ttransition: box-shadow 0.2s;\r\n\t\t}\r\n\r\n\t\t.related-activity-info {\r\n\t\t\tpadding: 16rpx;\r\n\r\n\t\t\t.related-activity-title {\r\n\t\t\t\tfont-size: 26rpx;\r\n\t\t\t\tcolor: #333;\r\n\t\t\t\tfont-weight: 500;\r\n\t\t\t\tmargin-bottom: 8rpx;\r\n\t\t\t\twhite-space: normal;\r\n\t\t\t\tdisplay: -webkit-box;\r\n\t\t\t\t-webkit-line-clamp: 2;\r\n\t\t\t\t-webkit-box-orient: vertical;\r\n\t\t\t\toverflow: hidden;\r\n\t\t\t\tline-height: 1.3;\r\n\t\t\t}\r\n\r\n\t\t\t.related-activity-time {\r\n\t\t\t\tfont-size: 22rpx;\r\n\t\t\t\tcolor: #999;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t.footer-bar {\r\n\t\tpadding: 20rpx 30rpx;\r\n\t\tbackground: #fff;\r\n\t\tborder-top: 1rpx solid rgba(0, 0, 0, 0.05);\r\n\t\tposition: fixed;\r\n\t\tbottom: 0;\r\n\t\tleft: 0;\r\n\t\tright: 0;\r\n\t\tz-index: 90;\r\n\t\tbox-shadow: 0 -2rpx 10rpx rgba(0, 0, 0, 0.03);\r\n\t\tanimation: cardFadeIn 0.7s 0.4s both;\r\n\r\n\t\t.action-btns {\r\n\t\t\tdisplay: flex;\r\n\t\t\tjustify-content: space-between;\r\n\r\n\t\t\t.action-btn {\r\n\t\t\t\tflex: 1;\r\n\t\t\t\tmargin: 0 10rpx;\r\n\t\t\t\theight: 80rpx;\r\n\t\t\t\tline-height: 80rpx;\r\n\t\t\t\tborder-radius: 40rpx;\r\n\t\t\t\tfont-size: 28rpx;\r\n\t\t\t\tfont-weight: 500;\r\n\t\t\t\ttext-align: center;\r\n\t\t\t\tbackground: #f5f5f5;\r\n\t\t\t\tcolor: #666;\r\n\t\t\t\tborder: none;\r\n\t\t\t\ttransition: transform 0.2s, box-shadow 0.2s;\r\n\r\n\t\t\t\t&:active {\r\n\t\t\t\t\ttransform: scale(0.96);\r\n\t\t\t\t\tbox-shadow: 0 2rpx 8rpx rgba($primary-color, 0.18);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t&.primary {\r\n\t\t\t\t\tbackground: linear-gradient(90deg,\r\n\t\t\t\t\t\t\t$primary-color,\r\n\t\t\t\t\t\t\tlighten($primary-color, 10%));\r\n\t\t\t\t\tcolor: #fff;\r\n\t\t\t\t\tbox-shadow: 0 4rpx 12rpx rgba($primary-color, 0.18);\r\n\r\n\t\t\t\t\t&:active {\r\n\t\t\t\t\t\tbox-shadow: 0 1rpx 4rpx rgba($primary-color, 0.1);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t&.disabled {\r\n\t\t\t\t\tbackground: #eee;\r\n\t\t\t\t\tcolor: #999;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</style>","import MiniProgramPage from 'D:/2大花/毕业设计/Compus/pages/circle/activity-datail/activity-datail.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","uniCloud","res"],"mappings":";;AA2GC,MAAK,YAAU;AAAA,EACd,OAAO;AACN,WAAO;AAAA,MACN,IAAI;AAAA,MACJ,UAAU,CAAE;AAAA;AAAA,MACZ,mBAAmB;AAAA,QAAC;AAAA,UAClB,IAAI;AAAA,UACJ,OAAO;AAAA,UACP,OAAO;AAAA,UACP,MAAM,IAAI,MAAK,oBAAI,QAAO,YAAY,IAAI,KAAK,KAAK,KAAK,GAAI;AAAA;AAAA,UAC7D,QAAQ;AAAA,QACR;AAAA,QACD;AAAA,UACC,IAAI;AAAA,UACJ,OAAO;AAAA,UACP,OAAO;AAAA,UACP,MAAM,IAAI,MAAK,oBAAI,QAAO,YAAY,IAAI,KAAK,KAAK,KAAK,GAAI;AAAA;AAAA,UAC7D,QAAQ;AAAA,QACR;AAAA,QACD;AAAA,UACC,IAAI;AAAA,UACJ,OAAO;AAAA,UACP,OAAO;AAAA,UACP,MAAM,IAAI,MAAK,oBAAI,QAAO,YAAY,IAAI,KAAK,KAAK,KAAK,GAAI;AAAA;AAAA,UAC7D,QAAQ;AAAA,QACR;AAAA,MACD;AAAA,MACD,iBAAiB;AAAA,MACjB,kBAAkB;AAAA,MAClB,gBAAgB;AAAA,MAChB,iBAAiB;AAAA,MACjB,cAAc;AAAA,MACd,WAAW;AAAA,MACX,eAAe;AAAA;AAAA,MACf,eAAe;AAAA;AAAA;EAEhB;AAAA,EACD,OAAO,SAAS;AAEf,UAAM,aAAaA,oBAAI;AACvB,UAAM,aAAaA,oBAAI;AACvB,SAAK,kBAAkB,WAAW;AAClC,SAAK,mBAAmB,WAAW;AACnC,SAAK,iBAAiB,WAAW;AACjC,SAAK,kBAAkB,WAAW;AAClC,SAAK,eAAe,WAAW,kBAAkB,WAAW;AAC5D,QAAI,QAAQ,IAAI;AACf,WAAK,KAAK,QAAQ;AAClB,WAAK,mBAAkB;AAAA,IACxB;AAAA,EACA;AAAA,EACD,UAAU;AACT,eAAW,MAAM;AAChB,WAAK,YAAY;AAAA,IACjB,GAAE,GAAG;AAAA,EACN;AAAA,EACD,SAAS;AAAA;AAAA,IAER,eAAe;AACdA,oBAAAA,MAAY,MAAA,OAAA,2DAAA,MAAM;AAElB,YAAM,WAAW,mBAAmB,KAAK,UAAU;AAAA,QAClD,KAAK,KAAK,SAAS;AAAA,QACnB,OAAO,KAAK,SAAS;AAAA,QACrB,SAAS,KAAK,SAAS;AAAA,QACvB,eAAe,KAAK,SAAS,iBAAkB,KAAK,SAAS,QAAQ,KAAK,SAAS,KACjF;QACF,UAAU,KAAK,SAAS;AAAA,QACxB,eAAe,KAAK,SAAS;AAAA,QAC7B,MAAM,KAAK,SAAS;AAAA,QACpB,OAAO,KAAK,SAAS,UAAU,KAAK,SAAS,QAAQ,CAAC,KAAK,SAAS,KAAK,IAAI,CAAA;AAAA,QAC7E,UAAU,KAAK,SAAS;AAAA,MACxB,CAAA,CAAC;AACFA,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAK,sDAAsD,QAAQ;AAAA,MACpE,CAAC;AAAA,IACD;AAAA;AAAA,IAGD,gBAAgB;AACfA,oBAAAA,MAAI,UAAU;AAAA,QACb,OAAO;AAAA,QACP,SAAS;AAAA,QACT,YAAY;AAAA,MACb,CAAC;AAAA,IACD;AAAA;AAAA,IAED,MAAM,qBAAqB;;AAC1B,UAAI;AAEH,cAAM,QAAQA,cAAAA,MAAI,eAAe,cAAc;AAC/C,YAAI,OAAO;AACV,gBAAM,eAAe,KAAK,MAAM,KAAK,MAAM,MAAM,GAAG,EAAE,CAAC,CAAC,CAAC;AACzD,eAAK,gBAAgB,aAAa;AAAA,QACnC;AAGA,cAAM,MAAM,MAAMC,iBAAS,SAAU,EAAC,WAAW,aAAa,EAAE,IAAI,KAAK,EAAE,EAAE,IAAG;AAChF,YAAI,IAAI,OAAO,QAAQ,IAAI,OAAO,KAAK,SAAS,GAAG;AAClD,gBAAM,cAAc,IAAI,OAAO,KAAK,CAAC;AAErC,eAAK,gBAAgB,KAAK,kBAAkB,YAAY;AAExD,gBAAM,UAAU,MAAMA,cAAQ,GAAC,SAAU,EAAC,WAAW,cAAc,EAAE,IAAI,YAAY,OAAO,EAC1F,MAAM,sBAAsB,EAAE;AAChC,eAAK,WAAW;AAAA,YACf,GAAG;AAAA,YACH,MAAM,IAAI,KAAK,YAAY,aAAa;AAAA;AAAA;AAAA,YAExC,cAAc,YAAY,kBAAkB;AAAA;AAAA,YAC5C,UAAU,KAAK,YAAY,YAAY,QAAQ;AAAA;AAAA,YAC/C,UAAQ,mBAAQ,OAAO,KAAK,CAAC,MAArB,mBAAwB,gBAAxB,mBAAqC,QAC5C;AAAA,YACD,SAAO,iBAAY,UAAZ,mBAAoB,OAAM;AAAA;AAAA,YACjC,aAAW,aAAQ,OAAO,KAAK,CAAC,MAArB,mBAAwB,aAAY;AAAA,YAC/C,eAAe,KAAK,WAAW,YAAY,WAAW;AAAA;AAAA;eAEjD;AACND,wBAAAA,MAAI,UAAU;AAAA,YACb,OAAO;AAAA,YACP,MAAM;AAAA,UACP,CAAC;AACDA,wBAAG,MAAC,aAAY;AAAA,QACjB;AAAA,MACC,SAAO,KAAK;AACbA,sGAAc,YAAY,GAAG;AAC7BA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,QACP,CAAC;AAAA,MACF;AAAA,IACA;AAAA;AAAA,IAED,YAAY,UAAU;AACrB,YAAM,SAAS;AAAA,QACd,IAAI;AAAA,QACJ,IAAI;AAAA,QACJ,IAAI;AAAA,QACJ,IAAI;AAAA,QACJ,IAAI;AAAA;AAEL,aAAO,OAAO,QAAQ,KAAK;AAAA,IAC3B;AAAA;AAAA;AAAA,IAGD,cAAc,MAAM;AACnB,YAAM,eAAc,oBAAI,KAAM,GAAC,QAAO;AACtC,YAAM,eAAe,KAAK,KAAK,QAAO;AAEtC,UAAI,cAAc,cAAc;AAC/B,eAAO;AAAA,aACD;AACN,eAAO;AAAA,MACR;AAAA,IACA;AAAA;AAAA,IAGD,QAAQ,MAAM;AACb,YAAM,eAAc,oBAAI,KAAM,GAAC,QAAO;AACtC,YAAM,eAAe,KAAK,KAAK,QAAO;AACtC,aAAO,cAAc;AAAA,IACrB;AAAA;AAAA,IAED,MAAM,aAAa,MAAM;AACxBA,kGAAY,QAAQ,IAAI;AACxBA,oBAAY,MAAA,MAAA,OAAA,2DAAA,QAAQ,KAAK,QAAQ;AACjC,UAAI;AAEH,cAAM,QAAQA,cAAAA,MAAI,eAAe,cAAc;AAC/C,YAAI,CAAC,OAAO;AACXA,wBAAAA,MAAI,UAAU;AAAA,YACb,OAAO;AAAA,YACP,SAAS;AAAA,YACT,aAAa;AAAA,YACb,SAAS,CAACE,SAAQ;AACjB,kBAAIA,KAAI,SAAS;AAChBF,8BAAAA,MAAI,WAAW;AAAA,kBACd,KAAK;AAAA,gBACN,CAAC;AAAA,cACF;AAAA,YACD;AAAA,UACD,CAAC;AACD;AAAA,QACD;AAGA,cAAM,MAAM,MAAMC,cAAQ,GAAC,aAAa;AAAA,UACvC,MAAM;AAAA,UACN,MAAM;AAAA,YACL,YAAY,KAAK,SAAS;AAAA,YAC1B;AAAA,UACD;AAAA,QACD,CAAC;AAED,YAAI,IAAI,OAAO,SAAS;AACvBD,wBAAAA,MAAI,UAAU;AAAA,YACb,OAAO;AAAA,YACP,MAAM;AAAA,UACP,CAAC;AACD,eAAK,UAAS;AAAA,eACR;AAEN,cAAI,IAAI,OAAO,SAAS,iBAAiB;AACxCA,0BAAAA,MAAI,UAAU;AAAA,cACb,OAAO;AAAA,cACP,SAAS;AAAA,cACT,aAAa;AAAA,cACb,SAAS,CAACE,SAAQ;AACjB,oBAAIA,KAAI,SAAS;AAChBF,gCAAAA,MAAI,WAAW;AAAA,oBACd,KAAK;AAAA,kBACN,CAAC;AAAA,gBACF;AAAA,cACD;AAAA,YACD,CAAC;AAAA,iBACK;AACNA,0BAAAA,MAAI,UAAU;AAAA,cACb,OAAO,IAAI,OAAO,WAAW;AAAA,cAC7B,MAAM;AAAA,YACP,CAAC;AAAA,UACF;AAAA,QACD;AAAA,MACC,SAAO,KAAK;AACbA,sGAAc,UAAU,GAAG;AAC3BA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,QACP,CAAC;AAAA,MACF;AAAA,IACA;AAAA,IACD,eAAe,MAAM;AACpB,YAAM,eAAc,oBAAI,KAAM,GAAC,QAAO;AACtC,YAAM,eAAe,KAAK,KAAK,QAAO;AACtC,aAAO,cAAc,eAAe,oBAAoB;AAAA,IACxD;AAAA;AAAA,IAED,WAAW,IAAI;AACd,YAAM,OAAO,IAAI,KAAK,EAAE;AACxB,YAAM,OAAO,KAAK;AAClB,YAAM,SAAS,KAAK,aAAa,GAAG,SAAQ,EAAG,SAAS,GAAG,GAAG;AAC9D,YAAM,MAAM,KAAK,QAAS,EAAC,SAAQ,EAAG,SAAS,GAAG,GAAG;AACrD,YAAM,QAAQ,KAAK,SAAU,EAAC,SAAQ,EAAG,SAAS,GAAG,GAAG;AACxD,YAAM,UAAU,KAAK,WAAY,EAAC,SAAQ,EAAG,SAAS,GAAG,GAAG;AAE5D,aAAO,GAAG,IAAI,IAAI,KAAK,IAAI,GAAG,IAAI,KAAK,IAAI,OAAO;AAAA,IACnD;AAAA,EACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AChWH,GAAG,WAAW,eAAe;"}