{"version":3,"file":"addactivities.js","sources":["pages/circle/addactivities/addactivities.vue","../../../Software/hbuilder/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvY2lyY2xlL2FkZGFjdGl2aXRpZXMvYWRkYWN0aXZpdGllcy52dWU"],"sourcesContent":["<template>\n  <view class=\"add-activity-container\">\n    <!-- 顶部渐变提示 -->\n    <view class=\"header-gradient-overlap\">\n      <view class=\"header-gradient-fade\"></view>\n    </view>\n    <!-- 悬浮叠加的输入卡片（标题、内容、上传封面同盒） -->\n    <view class=\"section overlap-card\">\n      <input class=\"input-title\" v-model=\"title\" maxlength=\"30\" placeholder=\"清晰标题更容易被推荐哦~\" />\n      \n      <editor \n        id=\"editor\"\n        ref=\"editor\"\n        class=\"rich-editor\"\n        :value=\"contentHtml\"\n        placeholder=\"为了让大家更好地了解活动，请介绍一下活动亮点、行程规划和注意事项等内容……\"\n        :maxlength=\"500\"  \n        @ready=\"onEditorReady\"\n        @input=\"onEditorInput\"\n      ></editor>\n      <view class=\"word-count\">已输入{{ currentWordCount }}/500字</view>\n      <!-- 上传活动封面区域放在卡片内，富文本编辑器下方 -->\n      <view class=\"cover-upload-box\">\n        <view class=\"cover-upload\" @tap=\"chooseCover\">\n          <image v-if=\"cover\" :src=\"cover\" class=\"cover-img\"></image>\n          <view v-else class=\"cover-placeholder\">\n            <text class=\"iconfont icon-tianjia\"></text>\n            <view>上传活动封面</view>\n          </view>\n        </view>\n      </view>\n    </view>\n    <!-- 活动信息区域卡片 -->\n    <view class=\"info-card\">\n      <!-- 活动类型 -->\n      <picker :range=\"typeOptions\" @change=\"onTypeChange\">\n        <view class=\"info-row\">\n          <text class=\"iconfont icon-type info-icon\"></text>\n          <text class=\"info-label\">活动类型</text>\n          <view class=\"info-value\">{{ typeOptions[typeIndex] || '请选择' }}</view>\n          <text class=\"iconfont icon-arrow-right info-arrow\"></text>\n        </view>\n      </picker>\n      <view class=\"info-divider\"></view>\n      <!-- 活动时间 -->\n      <picker mode=\"multiSelector\" :range=\"timeRange\" @change=\"onTimeChange\">\n        <view class=\"info-row\">\n          <text class=\"iconfont icon-shijian1 info-icon\"></text>\n          <text class=\"info-label\">活动时间</text>\n          <view class=\"info-value\">{{ timeText || '请选择' }}</view>\n          <text class=\"iconfont icon-arrow-right info-arrow\"></text>\n        </view>\n      </picker>\n      <view class=\"info-divider\"></view>\n      <!-- 活动地点 -->\n      <view class=\"info-row\">\n        <text class=\"iconfont icon-didiandingwei_o info-icon\"></text>\n        <text class=\"info-label\">活动地点</text>\n        <input class=\"info-value input-value\" v-model=\"place\" placeholder=\"请输入活动地点\" />\n      </view>\n      <view class=\"info-divider\"></view>\n      <!-- 最大参与人数 -->\n      <view class=\"info-row\">\n        <text class=\"iconfont icon-renshu info-icon\"></text>\n        <text class=\"info-label\">最大参与人数</text>\n        <input class=\"info-value input-value\" v-model.number=\"maxAttendees\" type=\"number\" min=\"1\" placeholder=\"请输入最大参与人数\" />\n      </view>\n      <view class=\"info-divider\"></view>\n      <!-- 活动标签 -->\n      <view class=\"info-row tag-row\">\n        <text class=\"iconfont icon-biaoqian info-icon\"></text>\n        <text class=\"info-label\">活动标签</text>\n        <view class=\"tag-list\">\n          <view\n            v-for=\"(tag, idx) in tagOptions\"\n            :key=\"idx\"\n            class=\"tag-chip\"\n            :class=\"{ active: selectedTags.includes(tag) }\"\n            @tap.stop=\"toggleTag(tag)\"\n          >{{ tag }}</view>\n        </view>\n      </view>\n    </view>\n    <!-- 发布按钮 -->\n    <view class=\"footer\">\n      <view\n        class=\"btn-publish\"\n        :class=\"{ disabled: !canPublish }\"\n        @tap=\"canPublish ? publishActivity() : null\"\n      >\n        {{ isEdit ? '保存编辑' : '确认发布' }} <!-- 动态切换按钮文本 -->\n      </view>\n    </view>\n  </view>\n</template>\n\n<script>\nexport default {\n  data() {\n\n    // 动态生成未来30天的日期数组（格式MM/DD）\n    const generateDateRange = () => {\n      const dates = [];\n      const currentDate = new Date();\n      for (let i = 0; i < 30; i++) { // 生成未来30天\n        const date = new Date(currentDate);\n        date.setDate(currentDate.getDate() + i);\n        const month = (date.getMonth() + 1).toString().padStart(2, '0');\n        const day = date.getDate().toString().padStart(2, '0');\n        dates.push(`${month}/${day}`);\n      }\n      return dates;\n    };\n\n    return {\n      cover: '',\n      isHot: true,\n      title: '',\n      typeOptions: ['官方', '社团', '学术', '体育', '娱乐', '其他'],\n      typeIndex: -1,\n      timeRange: [\n        generateDateRange(), // 动态生成的日期数组\n        ['10:00', '14:00', '18:00', '20:00'] // 固定时段选项\n      ],\n      timeText: '',\n      place: '',\n      tagOptions: ['户外', '运动', '娱乐', '交友', '学习', '比赛', '官方', '自发'],\n      selectedTags: [],\n      maxAttendees: '', // 最大参与人数\n      contentHtml: '',  // 存储富文本内容\n      currentWordCount: 0 , // 当前输入字数\n      isEdit: false, // 是否为编辑状态\n      editId: '', // 编辑时的活动ID\n    };\n  },\n  onLoad(options) {\n    if (options.activity) {\n      const activity = JSON.parse(decodeURIComponent(options.activity));\n      this.isEdit = true;\n      this.editId = activity._id;\n      this.title = activity.title;\n      this.contentHtml = activity.content;\n      // 处理时间回显\n      if (activity.activity_time) {\n        this.timeText = `${this.formatDate(activity.activity_time).split(' ')[0]} ${this.formatTime(activity.activity_time)}`;\n      }\n      this.place = activity.location;\n      this.maxAttendees = activity.max_attendees;\n      this.selectedTags = Array.isArray(activity.tags) ? activity.tags : [];\n      this.cover = activity.files?.[0] || '';\n      // 回显类型\n      this.typeIndex = this.typeOptions.findIndex(t => t === activity.category);\n    }\n  },\n  computed: {\n    canPublish() {\n      // 编辑模式下允许部分字段不变（根据需求调整验证逻辑）\n      return this.isEdit || (\n        this.cover && \n        this.title.trim() && \n        this.contentHtml.trim() && \n        this.typeIndex !== -1 && \n        this.timeText && \n        this.place.trim() && \n        Number(this.maxAttendees) >= 1\n      );\n    }\n  },\n  methods: {\n    // 时间格式化辅助方法（用于回显时间）\n    formatDate(ts) {\n      const date = new Date(ts);\n      const month = (date.getMonth() + 1).toString().padStart(2, '0');\n      const day = date.getDate().toString().padStart(2, '0');\n      return `${month}/${day}`;\n    },\n    formatTime(ts) {\n      const date = new Date(ts);\n      const hours = date.getHours().toString().padStart(2, '0');\n      const minutes = date.getMinutes().toString().padStart(2, '0');\n      return `${hours}:${minutes}`;\n    },\n    chooseCover() {\n      uni.chooseImage({\n        count: 1,\n        sizeType: ['compressed'],\n        sourceType: ['album', 'camera'],\n        success: (res) => {\n          this.cover = res.tempFilePaths[0];\n        }\n      });\n    },\n    onTypeChange(e) {\n      this.typeIndex = e.detail.value;\n    },\n    onTimeChange(e) {\n      const [dateIdx, timeIdx] = e.detail.value;\n      this.timeText = `${this.timeRange[0][dateIdx]} ${this.timeRange[1][timeIdx]}`;\n    },\n    toggleTag(tag) {\n      const idx = this.selectedTags.indexOf(tag);\n      if (idx > -1) {\n        this.selectedTags.splice(idx, 1);\n      } else {\n        this.selectedTags.push(tag);\n      }\n    },\n    // 编辑器输入事件\n    onEditorInput(e) {\n      this.contentHtml = e.detail.html;  // 通过事件获取最新内容\n      const pureText = e.detail.text.replace(/<[^>]+>/g, '');\n      this.currentWordCount = pureText.length;\n    },\n    onEditorReady() {\n      // #ifdef MP-WEIXIN\n      uni.createSelectorQuery().in(this).select('#editor').context(res => {\n        if (res && res.context && this.contentHtml) {\n          console.log('小程序富文本内容回显', this.contentHtml)\n          res.context.setContents({ html: this.contentHtml });\n        }\n      }).exec();\n      // #endif\n      // #ifdef H5\n      if (this.$refs.editor && this.contentHtml) {\n        console.log('H5富文本内容回显', this.contentHtml)\n        this.$refs.editor.setContents({ html: this.contentHtml });\n      }\n      // #endif\n    },\n    publishActivity() {\n      if (!this.canPublish) return;\n      \n      uni.showLoading({ title: this.isEdit ? '更新中...' : '发布中...' });\n      \n      // 上传封面图（仅本地图片才上传，云端fileID或http图片直接用）\n      const uploadCover = new Promise((resolve, reject) => {\n        const isLocalFile = this.cover && !/^cloud:\\/\\//.test(this.cover) && !/^https?:\\/\\//.test(this.cover);\n        if (!this.cover || !isLocalFile) {\n          // 已经是云端图片、网络图片或未选择图片\n          resolve([this.cover]);\n          return;\n        }\n        uniCloud.uploadFile({\n          filePath: this.cover,\n          cloudPath: `activities/${Date.now()}-${Math.random().toString(36).slice(-6)}.${this.cover.split('.').pop()}`,\n          success: res => resolve([res.fileID]),\n          fail: err => reject(err)\n        });\n      });\n      \n      // 处理时间格式\n      const [dateStr, timeStr] = this.timeText.split(' ');\n      const [monthStr, dayStr] = dateStr.split('/');\n      const [hour, minute] = timeStr.split(':');\n      const currentDate = new Date();\n      const currentYear = currentDate.getFullYear();\n      const selectedMonth = parseInt(monthStr) - 1;\n      const selectedDay = parseInt(dayStr);\n      const activityDate = new Date(currentYear, selectedMonth, selectedDay, parseInt(hour), parseInt(minute));\n      if (activityDate.getMonth() !== selectedMonth) {\n        activityDate.setFullYear(currentYear + 1);\n      }\n      const activityTime = activityDate.getTime();\n      \n      uploadCover\n        .then(fileIDs => {\n          const userInfo = uni.getStorageSync('uni-id-pages-userInfo')\n          const userId = userInfo && userInfo._id ? userInfo._id : ''\n          if (!userId) {\n            uni.hideLoading();\n            uni.showToast({ title: '请先登录', icon: 'none' });\n            return Promise.reject(new Error('请先登录'));\n          }\n          // 编辑和新建分开\n          if (this.isEdit && this.editId) {\n            return uniCloud.callFunction({\n              name: 'update-content',\n              data: {\n                _id: this.editId,\n                content_type: 'activity',\n                title: this.title,\n                category: this.typeOptions[this.typeIndex],\n                content: this.contentHtml,\n                files: fileIDs,\n                activity_time: activityTime,\n                location: this.place,\n                max_attendees: Number(this.maxAttendees),\n                user_id: userId,\n                tags: this.selectedTags\n              }\n            });\n          } else {\n            return uniCloud.callFunction({\n              name: 'add-content',\n              data: {\n                content_type: 'activity',\n                title: this.title,\n                category: this.typeOptions[this.typeIndex],\n                content: this.contentHtml,\n                files: fileIDs,\n                activity_time: activityTime,\n                location: this.place,\n                max_attendees: Number(this.maxAttendees),\n                user_id: userId,\n                tags: this.selectedTags\n              }\n            });\n          }\n        })\n        .then(res => {\n          uni.hideLoading();\n          if (res && res.result && res.result.code === 200) {\n            uni.showToast({\n              title: this.isEdit ? '更新成功' : '发布成功',\n              icon: 'success'\n            });\n            setTimeout(() => {\n              // 通知上级页面刷新（适配微信小程序/uni-app）\n              const pages = getCurrentPages();\n              if (pages.length > 1) {\n                const prevPage = pages[pages.length - 2];\n                if (prevPage && typeof prevPage.onRefresh === 'function') {\n                  prevPage.onRefresh();\n                }\n                // 如果是从详情页进入编辑，详情页也需要刷新\n                if (pages.length > 2) {\n                  const detailPage = pages[pages.length - 3];\n                  if (detailPage && typeof detailPage.onRefresh === 'function') {\n                    detailPage.onRefresh();\n                  }\n                }\n              }\n              uni.navigateBack();\n            }, 800);\n          } else {\n            throw new Error(res.result.msg);\n          }\n        })\n        .catch(err => {\n          uni.hideLoading();\n          if (err && err.message !== '请先登录') {\n            uni.showToast({\n              title: err.message || (this.isEdit ? '更新失败' : '发布失败'),\n              icon: 'none'\n            });\n          }\n        });\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\n.add-activity-container {\n  min-height: 100vh;\n  background: #f8f9fc;\n  padding-bottom: 120rpx;\n}\n/* 自定义导航栏样式 */\n.custom-navbar {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  height: 100rpx; /* 与原生导航栏高度一致 */\n  background: linear-gradient(90deg, #eaffd0 0%, #fffbe8 100%); /* 与页面顶部渐变一致 */\n  display: flex;\n  align-items: center;\n  padding: 0 32rpx;\n  z-index: 10; /* 确保在顶部 */\n}\n\n.nav-back {\n  font-size: 40rpx;\n  color: #222;\n  margin-right: 32rpx;\n}\n\n.nav-title {\n  font-size: 34rpx;\n  font-weight: 700;\n  color: #222;\n}\n// 顶部渐变色区域加高，底部渐变透明过渡\n.header-gradient-overlap {\n  position: relative;\n  background: linear-gradient(90deg, #eaffd0 0%, #fffbe8 100%);\n  border-radius: 0 0 48rpx 48rpx;\n  padding: 0 0 120rpx 0;\n  min-height: 260rpx;\n  z-index: 1;\n  overflow: hidden;\n}\n.header-gradient-fade {\n  position: absolute;\n  left: 0; right: 0; bottom: 0;\n  height: 40rpx;\n  background: linear-gradient(to bottom, rgba(255,255,255,0) 0%, #f8f9fc 100%);\n  z-index: 2;\n}\n// 悬浮叠加的输入卡片\n.overlap-card {\n  position: relative;\n  z-index: 3;\n  margin: -350rpx 24rpx 0 24rpx;\n  background: #fff;\n  border-radius: 24rpx;\n  box-shadow: 0 8rpx 32rpx rgba(77,124,191,0.10);\n  padding: 36rpx 28rpx 28rpx 28rpx;\n}\n.cover-upload-box {\n  margin-top: 32rpx;\n  display: flex;\n  align-items: center;\n  position: relative;\n}\n.cover-upload {\n  width: 160rpx;\n  height: 160rpx;\n  border-radius: 16rpx;\n  background: #f5f6fa;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin-right: 24rpx;\n  position: relative;\n  overflow: hidden;\n  border: 2rpx dashed #e0e0e0;\n  cursor: pointer;\n}\n.cover-img {\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n  border-radius: 16rpx;\n}\n.cover-placeholder {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  color: #e0c97b;\n  font-size: 48rpx;\n}\n.icon-tianjia {\n  font-size: 60rpx;\n  color: #e0c97b;\n}\n.hot-badge {\n  position: absolute;\n  left: 180rpx;\n  top: 0;\n  background: #222;\n  color: #ffe37c;\n  font-size: 22rpx;\n  border-radius: 12rpx;\n  padding: 4rpx 18rpx;\n  font-weight: 700;\n  transform: translateY(-50%);\n}\n.input-title {\n  // width: 100%;\n  font-size: 34rpx;\n  font-weight: 800;\n  height: 80rpx;\n  // color: #333;\n  background: #f8f9fc;\n\t// background-color: pink;\n  border: none;\n  border-radius: 12rpx;\n  padding: 18rpx;\n  margin-bottom: 12rpx;\n}\n.input-desc {\n  width: 95%;\n  min-height: 80rpx;\n  font-size: 26rpx;\n  color: #cbcdca;\n  background: #f8f9fc;\n\t// background-color: pink;\n  border: none;\n  border-radius: 12rpx;\n  padding: 18rpx;\n}\n.rich-editor {\n  height: 200rpx;\n  //字体不倾斜\n  font-style: normal;\n}\n.word-count{\n  font-size: 24rpx;\n  color: #cbcdca;\n  margin-top: 8rpx;\n  text-align: right;\n}\n.info-card {\n  background: #fff;\n  border-radius: 24rpx;\n  margin: 32rpx 24rpx 0 24rpx;\n  box-shadow: 0 2rpx 12rpx rgba(77,124,191,0.06);\n  padding: 0 0 80rpx 0; //上 左 下 右\n}\n.info-row {\n  display: flex;\n  align-items: center;\n  padding: 0 32rpx;\n  height: 110rpx;\n  position: relative;\n}\n.info-icon {\n  font-size: 36rpx;\n  color: #b0b6be;\n  margin-right: 18rpx;\n}\n.info-label {\n  font-size: 30rpx;\n  font-family: 'AlimamaShuHeiTi-Bold' !important;\n  font-weight: 700;\n  color: #222;\n  margin-right: 18rpx;\n  min-width: 140rpx;\n}\n.info-value {\n  flex: 1;\n  font-size: 28rpx;\n  color: #b0b6be;\n  text-align: left;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n.input-value {\n  background: transparent;\n  border: none;\n  font-size: 28rpx;\n  color: #b0b6be;\n  flex: 1;\n  padding: 0;\n  margin: 0;\n}\n.info-arrow {\n  font-size: 32rpx;\n  color: #e0e0e0;\n  margin-left: 12rpx;\n}\n.info-divider {\n  height: 1rpx;\n  background: #f0f1f5;\n  margin: 0 32rpx;\n}\n.tag-row {\n  align-items: flex-start;\n  min-height: 90rpx;\n  padding-top: 18rpx;\n  padding-bottom: 18rpx;\n}\n.tag-list {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 18rpx;\n  margin-left: 12rpx;\n}\n.tag-chip {\n  padding: 10rpx 32rpx;\n  background: #f5f6fa;\n  border-radius: 32rpx;\n  color: #888;\n  font-size: 26rpx;\n  border: 2rpx solid transparent;\n  transition: all 0.2s;\n  font-weight: 500;\n}\n.tag-chip.active {\n  background: linear-gradient(90deg, #f7c948 0%, #f7e7b7 100%);\n  color: #c09853;\n  border-color: #f7c948;\n  font-weight: 700;\n}\n.footer {\n  position: fixed;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: #fff;\n  padding: 18rpx 32rpx 24rpx 32rpx;\n  z-index: 10;\n}\n.btn-publish {\n  width: 92%;\n  margin: 0 auto;\n  height: 88rpx;\n  background: linear-gradient(90deg, #b7f36b 0%, #ffe37c 100%);\n  color: #222;\n  font-size: 32rpx;\n  font-weight: 700;\n  border-radius: 20rpx;\n  letter-spacing: 2rpx;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  opacity: 1;\n  transition: background 0.2s, opacity 0.2s;\n}\n.btn-publish.disabled {\n  background: #b2b2b4 !important;\n  color: #dadde3 !important;\n  opacity: 0.7;\n  pointer-events: none;\n}\n</style>\n","import MiniProgramPage from 'D:/2大花/毕业设计/Compus/pages/circle/addactivities/addactivities.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","uniCloud"],"mappings":"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"}