{"version":3,"file":"post-datail.js","sources":["pages/circle/post-datail/post-datail.vue","../../../Software/hbuilder/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvY2lyY2xlL3Bvc3QtZGF0YWlsL3Bvc3QtZGF0YWlsLnZ1ZQ"],"sourcesContent":["<template>\n  <view class=\"post-detail-bg\">\n    <view class=\"post-detail-container\">\n      <!-- 头部卡片 -->\n      <view class=\"post-header-card\">\n        <image :src=\"post.avatar\" class=\"post-avatar\"></image>\n        <view class=\"post-info\">\n          <view class=\"post-name-row\">\n            <text class=\"post-name\">{{ post.name }}</text>\n            <text class=\"post-tag\" :class=\"post.tagClass\">{{ post.tag }}</text>\n          </view>\n          <text class=\"post-meta\">{{ post.time }}</text>\n        </view>\n      </view>\n\n      <!-- 正文内容 -->\n      <view class=\"post-content-block\">\n        <text class=\"post-content\">{{ post.content }}</text>\n        <view class=\"post-images\" v-if=\"post.images && post.images.length\">\n          <image\n            v-for=\"(img, idx) in post.images\"\n            :key=\"idx\"\n            :src=\"img\"\n            mode=\"aspectFill\"\n            class=\"post-image\"\n            @tap=\"previewImage(post.images, idx)\"\n          ></image>\n        </view>\n      </view>\n\n      <!-- 操作区 -->\n      <view class=\"post-actions\">\n        <view class=\"action-item like-btn\" :class=\"{ 'is-active': post.isLiked }\" @tap=\"likePost\">\n          <text class=\"action-icon iconfont icon-dianzan\"></text>\n          <text class=\"action-text\">{{ post.likes }}</text>\n        </view>\n        <view class=\"action-item comment-btn\" @tap=\"focusCommentInput\">\n          <text class=\"action-icon iconfont icon-icon_comment\"></text>\n          <text class=\"action-text\">{{ comments.length }}</text>\n        </view>\n        <view class=\"action-item share-btn\">\n          <text class=\"action-icon iconfont icon-fasong\"></text>\n          <text class=\"action-text\">分享</text>\n        </view>\n      </view>\n\n      <!-- 评论区 -->\n      <view class=\"comment-section\">\n        <view class=\"comment-title\">评论区 ({{ comments.length }})</view>\n        <view v-if=\"comments.length === 0\" class=\"comment-empty\">暂无评论，快来抢沙发吧~</view>\n        <view v-else class=\"comment-list\">\n          <view class=\"comment-item\" v-for=\"(comment, idx) in comments\" :key=\"idx\">\n            <image :src=\"comment.avatar\" class=\"comment-avatar\"></image>\n            <view class=\"comment-content-block\">\n              <view class=\"comment-header\">\n                <text class=\"comment-name\">{{ comment.name }}</text>\n                <text class=\"comment-time\">{{ comment.time }}</text>\n              </view>\n              <text class=\"comment-text\">{{ comment.content }}</text>\n              <view class=\"comment-actions\">\n                <view class=\"comment-like-btn\" :class=\"{ liked: comment.liked }\" @tap=\"likeComment(idx)\">\n                  <text class=\"iconfont\" :class=\"comment.liked ? 'icon-dianzan' : 'icon-dianzan'\" ></text>\n                  <text class=\"like-count\">{{ comment.likes }}</text>\n                </view>\n              </view>\n            </view>\n          </view>\n        </view>\n      </view>\n    </view>\n    <!-- 评论输入框 -->\n    <view class=\"comment-input-bar\">\n      <input class=\"comment-input\" v-model=\"commentText\" :placeholder=\"'说点什么...'\" :focus=\"isInputFocused\" @focus=\"onInputFocus\" @blur=\"onInputBlur\" />\n      <button class=\"send-btn\" :disabled=\"!commentText.trim()\" @tap=\"sendComment\">发送</button>\n    </view>\n  </view>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      post: {},\n      comments: [],\n      commentText: '',\n      isInputFocused: false\n    }\n  },\n  onLoad(options) {\n    const postId = options.id;\n    const posts = uni.getStorageSync('posts') || [];\n    const post = posts.find(item => item.id == postId);\n    if (post) {\n      this.post = post;\n    } else {\n      uni.showToast({ title: '未找到该帖子', icon: 'none' });\n    }\n    // 模拟评论数据\n    this.comments = [\n      {\n        avatar: '/static/images/avatar1.png',\n        name: '小明',\n        time: '1小时前',\n        content: '写得真好，支持一下！',\n        likes: 2,\n        liked: false\n      },\n      {\n        avatar: '/static/images/avatar2.png',\n        name: '小红',\n        time: '30分钟前',\n        content: '有用的信息，感谢分享~',\n        likes: 1,\n        liked: false\n      }\n    ];\n  },\n  methods: {\n    previewImage(images, index) {\n      uni.previewImage({\n        urls: images,\n        current: images[index]\n      });\n    },\n    likePost() {\n      this.post.isLiked = !this.post.isLiked;\n      this.post.likes += this.post.isLiked ? 1 : -1;\n    },\n    likeComment(idx) {\n      const comment = this.comments[idx];\n      comment.liked = !comment.liked;\n      comment.likes += comment.liked ? 1 : -1;\n    },\n    focusCommentInput() {\n      this.isInputFocused = true;\n    },\n    onInputFocus() {\n      this.isInputFocused = true;\n    },\n    onInputBlur() {\n      this.isInputFocused = false;\n    },\n    sendComment() {\n      if (!this.commentText.trim()) return;\n      this.comments.unshift({\n        avatar: '/static/images/avatar3.png',\n        name: '我',\n        time: '刚刚',\n        content: this.commentText,\n        likes: 0,\n        liked: false\n      });\n      this.commentText = '';\n      this.isInputFocused = false;\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\n@import '@/styles/variables.scss';\n\n.post-detail-bg {\n  min-height: 100vh;\n  background: #f8f9fc;\n  padding-bottom: 120rpx;\n}\n.post-detail-container {\n  margin: 32rpx 0;\n  padding: 0 24rpx 24rpx 24rpx;\n}\n.post-header-card {\n  display: flex;\n  align-items: center;\n  background: $white;\n  border-radius: 18rpx;\n  box-shadow: 0 4rpx 16rpx rgba(77,124,191,0.08);\n  padding: 24rpx;\n  margin-bottom: 24rpx;\n}\n.post-avatar {\n  width: 80rpx;\n  height: 80rpx;\n  border-radius: 50%;\n  border: 2rpx solid #e5e7eb;\n  background: #f5f6fa;\n  margin-right: 20rpx;\n}\n.post-info {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n}\n.post-name-row {\n  display: flex;\n  align-items: center;\n  margin-bottom: 8rpx;\n}\n.post-name {\n  font-size: 32rpx;\n  font-weight: 600;\n  color: $dark-gray;\n  margin-right: 16rpx;\n}\n.post-tag {\n  padding: 4rpx 16rpx;\n  border-radius: 12rpx;\n  font-size: 22rpx;\n  font-weight: 500;\n  background: rgba($primary-color, 0.1);\n  color: $primary-color;\n  &.discussion { background: rgba($primary-color, 0.1); color: $primary-color; }\n  &.question { background: rgba($warning-color, 0.1); color: $warning-color; }\n  &.lost { background: rgba($error-color, 0.1); color: $error-color; }\n  &.pin { background: rgba($success-color, 0.1); color: $success-color; }\n  &.official { background: rgba($info-color, 0.1); color: $info-color; }\n  &.promotion { background: rgba($purple-color, 0.1); color: $purple-color; }\n}\n.post-meta {\n  font-size: 22rpx;\n  color: $gray;\n}\n.post-content-block {\n  background: $white;\n  border-radius: 16rpx;\n  padding: 32rpx 24rpx 24rpx 24rpx;\n  margin-bottom: 24rpx;\n  box-shadow: 0 2rpx 8rpx rgba(77,124,191,0.04);\n}\n.post-content {\n  font-size: 30rpx;\n  color: $dark-gray;\n  line-height: 1.8;\n  margin-bottom: 24rpx;\n  display: block;\n}\n.post-images {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 12rpx;\n  .post-image {\n    width: calc(33.33% - 8rpx);\n    height: 200rpx;\n    border-radius: 12rpx;\n    background-color: $bg-color;\n    object-fit: cover;\n  }\n}\n.post-actions {\n  display: flex;\n  align-items: center;\n  justify-content: space-around;\n  background: $white;\n  border-radius: 16rpx;\n  box-shadow: 0 2rpx 8rpx rgba(77,124,191,0.04);\n  padding: 18rpx 0;\n  margin-bottom: 24rpx;\n  .action-item {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    border-radius: 32rpx;\n    padding: 8rpx 32rpx;\n    font-size: 28rpx;\n    transition: all $transition-fast;\n    .action-icon {\n      font-size: 36rpx;\n      margin-right: 10rpx;\n      color: $gray;\n      transition: all $transition-fast;\n    }\n    .action-text {\n      font-size: 26rpx;\n      color: $gray;\n    }\n    &.like-btn.is-active .action-icon {\n      color: $error-color;\n      animation: likeAnimation 0.5s ease;\n    }\n    &:active {\n      background: $bg-color-hover;\n      transform: scale(0.96);\n    }\n  }\n}\n.comment-section {\n  background: $white;\n  border-radius: 16rpx;\n  box-shadow: 0 2rpx 8rpx rgba(77,124,191,0.04);\n  padding: 24rpx;\n  margin-bottom: 24rpx;\n}\n.comment-title {\n  font-size: 28rpx;\n  font-weight: 600;\n  color: $primary-color;\n  margin-bottom: 18rpx;\n}\n.comment-empty {\n  color: $gray;\n  font-size: 24rpx;\n  text-align: center;\n  padding: 32rpx 0;\n}\n.comment-list {\n  display: flex;\n  flex-direction: column;\n  gap: 24rpx;\n}\n.comment-item {\n  display: flex;\n  align-items: flex-start;\n}\n.comment-avatar {\n  width: 56rpx;\n  height: 56rpx;\n  border-radius: 50%;\n  margin-right: 16rpx;\n  background: #f5f6fa;\n  border: 1rpx solid #e5e7eb;\n}\n.comment-content-block {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n}\n.comment-header {\n  display: flex;\n  align-items: center;\n  gap: 12rpx;\n  margin-bottom: 4rpx;\n}\n.comment-name {\n  font-size: 26rpx;\n  font-weight: 500;\n  color: $dark-gray;\n}\n.comment-time {\n  font-size: 20rpx;\n  color: $gray;\n}\n.comment-text {\n  font-size: 26rpx;\n  color: $black;\n  margin-bottom: 8rpx;\n}\n.comment-actions {\n  display: flex;\n  align-items: center;\n  gap: 18rpx;\n}\n.comment-like-btn {\n  display: flex;\n  align-items: center;\n  color: $gray;\n  font-size: 24rpx;\n  border-radius: 24rpx;\n  padding: 4rpx 12rpx;\n  transition: all $transition-fast;\n  &:active {\n    background: $bg-color-hover;\n    color: $error-color;\n  }\n  &.liked {\n    color: $error-color;\n    .iconfont {\n      color: $error-color;\n      animation: likeAnimation 0.5s ease;\n    }\n    .like-count {\n      color: $error-color;\n    }\n  }\n}\n.like-count {\n  margin-left: 6rpx;\n  font-size: 24rpx;\n  color: $gray;\n}\n.comment-input-bar {\n  position: fixed;\n  left: 0;\n  bottom: 0;\n  width: 100vw;\n  background: $white;\n  box-shadow: 0 -2rpx 8rpx rgba(77,124,191,0.06);\n  display: flex;\n  align-items: center;\n  padding: 16rpx 24rpx;\n  z-index: 99;\n}\n.comment-input {\n  flex: 1;\n  height: 64rpx;\n  border-radius: 32rpx;\n  background: #f5f6fa;\n  border: none;\n  padding: 0 24rpx;\n  font-size: 26rpx;\n  margin-right: 16rpx;\n}\n.send-btn {\n  background: $primary-color;\n  color: $white;\n  border: none;\n  border-radius: 32rpx;\n  font-size: 26rpx;\n  padding: 0 32rpx;\n  height: 64rpx;\n  line-height: 64rpx;\n  transition: all $transition-fast;\n  &:disabled {\n    background: $gray;\n    color: #fff;\n    opacity: 0.5;\n  }\n}\n@keyframes likeAnimation {\n  0% { transform: scale(1);}\n  50% { transform: scale(1.4);}\n  100% { transform: scale(1);}\n}\n</style>","import MiniProgramPage from 'D:/2大花/毕业设计/Compus/pages/circle/post-datail/post-datail.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni"],"mappings":";;AA+EA,MAAK,YAAU;AAAA,EACb,OAAO;AACL,WAAO;AAAA,MACL,MAAM,CAAE;AAAA,MACR,UAAU,CAAE;AAAA,MACZ,aAAa;AAAA,MACb,gBAAgB;AAAA,IAClB;AAAA,EACD;AAAA,EACD,OAAO,SAAS;AACd,UAAM,SAAS,QAAQ;AACvB,UAAM,QAAQA,cAAG,MAAC,eAAe,OAAO,KAAK,CAAA;AAC7C,UAAM,OAAO,MAAM,KAAK,UAAQ,KAAK,MAAM,MAAM;AACjD,QAAI,MAAM;AACR,WAAK,OAAO;AAAA,WACP;AACLA,oBAAG,MAAC,UAAU,EAAE,OAAO,UAAU,MAAM,OAAK,CAAG;AAAA,IACjD;AAEA,SAAK,WAAW;AAAA,MACd;AAAA,QACE,QAAQ;AAAA,QACR,MAAM;AAAA,QACN,MAAM;AAAA,QACN,SAAS;AAAA,QACT,OAAO;AAAA,QACP,OAAO;AAAA,MACR;AAAA,MACD;AAAA,QACE,QAAQ;AAAA,QACR,MAAM;AAAA,QACN,MAAM;AAAA,QACN,SAAS;AAAA,QACT,OAAO;AAAA,QACP,OAAO;AAAA,MACT;AAAA;EAEH;AAAA,EACD,SAAS;AAAA,IACP,aAAa,QAAQ,OAAO;AAC1BA,oBAAAA,MAAI,aAAa;AAAA,QACf,MAAM;AAAA,QACN,SAAS,OAAO,KAAK;AAAA,MACvB,CAAC;AAAA,IACF;AAAA,IACD,WAAW;AACT,WAAK,KAAK,UAAU,CAAC,KAAK,KAAK;AAC/B,WAAK,KAAK,SAAS,KAAK,KAAK,UAAU,IAAI;AAAA,IAC5C;AAAA,IACD,YAAY,KAAK;AACf,YAAM,UAAU,KAAK,SAAS,GAAG;AACjC,cAAQ,QAAQ,CAAC,QAAQ;AACzB,cAAQ,SAAS,QAAQ,QAAQ,IAAI;AAAA,IACtC;AAAA,IACD,oBAAoB;AAClB,WAAK,iBAAiB;AAAA,IACvB;AAAA,IACD,eAAe;AACb,WAAK,iBAAiB;AAAA,IACvB;AAAA,IACD,cAAc;AACZ,WAAK,iBAAiB;AAAA,IACvB;AAAA,IACD,cAAc;AACZ,UAAI,CAAC,KAAK,YAAY,KAAM;AAAE;AAC9B,WAAK,SAAS,QAAQ;AAAA,QACpB,QAAQ;AAAA,QACR,MAAM;AAAA,QACN,MAAM;AAAA,QACN,SAAS,KAAK;AAAA,QACd,OAAO;AAAA,QACP,OAAO;AAAA,MACT,CAAC;AACD,WAAK,cAAc;AACnB,WAAK,iBAAiB;AAAA,IACxB;AAAA,EACF;AACF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC3JA,GAAG,WAAW,eAAe;"}