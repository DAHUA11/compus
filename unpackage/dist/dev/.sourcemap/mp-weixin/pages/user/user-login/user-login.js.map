{"version":3,"file":"user-login.js","sources":["pages/user/user-login/user-login.vue","../../../Software/hbuilder/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvdXNlci91c2VyLWxvZ2luL3VzZXItbG9naW4udnVl"],"sourcesContent":["<template>\n\t<view class=\"login-container\">\n\t\t<!-- Logo区域 -->\n\t\t<view class=\"logo-section\">\n\t\t\t<image class=\"logo\" src=\"/static/logo.png\" mode=\"aspectFit\"></image>\n\t\t\t<view class=\"logo-title\">校园圈</view>\n\t\t\t<view class=\"logo-subtitle\">发现校园精彩生活</view>\n\t\t</view>\n\t\t<!-- <uni-easyinput style=\"display:none\" /> -->\n\t\t<!-- 插画区域 -->\n\t\t<view class=\"illustration-section\">\n\t\t\t<image class=\"illustration\" src=\"/static/sports-ill.png\" mode=\"aspectFit\"></image>\n\t\t</view>\n\t\t\n\t\t<!-- 登录按钮区域 -->\n\t\t<view class=\"login-buttons\">\n\t\t\t<button class=\"wechat-btn\" @tap=\"handleWXLogin\">\n\t\t\t\t<image class=\"btn-icon\" src=\"/static/wechat.png\" mode=\"aspectFit\"></image>\n\t\t\t\t微信登录\n\t\t\t\t<uni-icons type=\"auth-filled\" size=\"30\"></uni-icons>\n\t\t\t</button>\n\t\t\t<button class=\"phone-btn\" @tap=\"phoneLogin\">\n\t\t\t\t<image class=\"btn-icon\" src=\"/static/phone.png\" mode=\"aspectFit\"></image>\n\t\t\t\t手机号登录\n\t\t\t</button>\n\t\t</view>\n\t\t\n\t\t<!-- 协议区域 -->\n\t\t<view class=\"agreement\">\n\t\t\t<checkbox :checked=\"checked\" @tap=\"toggleAgreement\" color=\"#07c160\" />\n\t\t\t<view class=\"agreement-text\">\n\t\t\t\t<text>我已阅读并同意</text>\n\t\t\t\t<text class=\"link\" @tap=\"openUserAgreement\">《用户协议》</text>\n\t\t\t\t<text>和</text>\n\t\t\t\t<text class=\"link\" @tap=\"openPrivacyPolicy\">《隐私政策》</text>\n\t\t\t</view> \n\t\t</view>\n\t</view>\n</template>\n\n<script>\n// import uniIcons from '@/uni_modules/uni-icons/components/uni-icons/uni-icons.vue'\n\nexport default {\n\t// components: { uniIcons },\n\tdata() {\n\t\treturn {\n\t\t\tchecked: false,\n\t\t\tloading: false\n\t\t}\n\t},\n\tmethods: {\n\t\ttoggleAgreement() {\n\t\t\tthis.checked = !this.checked\n\t\t},\n\t\t// async handleWXLogin() {\n\t\t// \tif (!this.checked) {\n\t\t// \t\treturn uni.showToast({\n\t\t// \t\t\ttitle: '请先阅读并同意用户协议和隐私政策',\n\t\t// \t\t\ticon: 'none'\n\t\t// \t\t})\n\t\t// \t}\n\n\t\t// \t// 防止重复点击\n\t\t// \tif (this.loading) return;\n\t\t// \tthis.loading = true;\n\n\t\t// \ttry {\n\t\t// \t\t// 1. 获取用户信息\n\t\t// \t\tconst userProfileRes = await uni.getUserProfile({\n\t\t// \t\t\tdesc: '用于完善用户资料',\n\t\t// \t\t\tlang: 'zh_CN'\n\t\t// \t\t});\n\t\t\t\t\n\t\t// \t\tconst userInfo = userProfileRes.userInfo;\n\t\t// \t\tconsole.log(userInfo)\n\t\t// \t\t// 2. 获取code\n\t\t// \t\tconst loginRes = await uni.login({\n\t\t// \t\t\tprovider: 'weixin'\n\t\t// \t\t});\n\t\t// \t\tconst code = loginRes.code;\n\n\t\t// \t\t// 3. 调用云函数登录\n\t\t// \t\tconst res = await uniCloud.callFunction({\n\t\t// \t\t\tname: 'uni-id-cf',\n\t\t// \t\t\tdata: {\n\t\t// \t\t\t\taction: 'loginByWeixin',\n\t\t// \t\t\t\tparams: {\n\t\t// \t\t\t\t\tcode,\n\t\t// \t\t\t\t\tuserInfo: {\n\t\t// \t\t\t\t\t\tnickname: userInfo.nickName,\n\t\t// \t\t\t\t\t\tavatar: userInfo.avatarUrl,\n\t\t// \t\t\t\t\t\tgender: userInfo.gender\n\t\t// \t\t\t\t\t}\n\t\t// \t\t\t\t}\n\t\t// \t\t\t}\n\t\t// \t\t});\n\n\t\t// \t\tif (res.result.code === 0) {\n\t\t// \t\t\tuni.setStorageSync('uni_id_token', res.result.token)\n\t\t// \t\t\tuni.setStorageSync('uni_id_user', res.result.userInfo)\n\t\t// \t\t\tuni.showToast({\n\t\t// \t\t\t\ttitle: '登录成功',\n\t\t// \t\t\t\ticon: 'success',\n\t\t// \t\t\t\tduration: 2000\n\t\t// \t\t\t})\n\t\t// \t\t\tsetTimeout(() => {\n\t\t// \t\t\t\tuni.switchTab({\n\t\t// \t\t\t\t\turl: '/pages/circle/circle'\n\t\t// \t\t\t\t})\n\t\t// \t\t\t}, 1500)\n\t\t// \t\t} else {\n\t\t// \t\t\tthrow new Error(res.result.message || '登录失败')\n\t\t// \t\t}\n\t\t// \t} catch (error) {\n\t\t// \t\tconsole.error('登录错误:', error)\n\t\t// \t\tuni.showToast({\n\t\t// \t\t\ttitle: error.message || '登录失败，请重试',\n\t\t// \t\t\ticon: 'none'\n\t\t// \t\t})\n\t\t// \t} finally {\n\t\t// \t\tthis.loading = false;\n\t\t// \t\tuni.hideLoading()\n\t\t// \t}\n\t\t// },\n\t\tphoneLogin() {\n\t\t\tif (!this.checked) {\n\t\t\t\treturn uni.showToast({\n\t\t\t\t\ttitle: '请先阅读并同意用户协议和隐私政策',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t})\n\t\t\t}\n\t\t\tuni.navigateTo({\n\t\t\t\turl: '/pages/user/user-login-phone/user-login-phone'\n\t\t\t})\n\t\t},\n\t\topenUserAgreement() {\n\t\t\tuni.navigateTo({\n\t\t\t\turl: '/pages/agreement/user'\n\t\t\t})\n\t\t},\n\t\topenPrivacyPolicy() {\n\t\t\tuni.navigateTo({\n\t\t\t\turl: '/pages/agreement/privacy'\n\t\t\t})\n\t\t}\n\t}\n}\n</script>\n\n<style lang=\"scss\">\n.login-container {\n\tmin-height: 100vh;\n\tbackground: linear-gradient(180deg, #e8f9e4 0%, #f6fff6 100%);\n\tpadding: 0 40rpx;\n\tbox-sizing: border-box;\n\tposition: relative;\n}\n\n.logo-section {\n\ttext-align: center;\n\tpadding-top: 20rpx;\n\t.logo {\n\t\twidth: 120rpx;\n\t\theight: 120rpx;\n\t\tmargin-bottom: 20rpx;\n\t}\n\t\n\t.logo-title {\n\t\tfont-size: 40rpx;\n\t\tfont-weight: bold;\n\t\tcolor: #333;\n\t\tmargin-bottom: 12rpx;\n\t}\n\t\n\t.logo-subtitle {\n\t\tfont-size: 28rpx;\n\t\tcolor: #666;\n\t}\n}\n\n.illustration-section {\n\tmargin: 60rpx 0;\n\ttext-align: center;\n\t\n\t.illustration {\n\t\twidth: 400rpx;\n\t\theight: 300rpx;\n\t}\n}\n\n.login-buttons {\n\tmargin-bottom: 40rpx;\n\t\n\t.wechat-btn, .phone-btn {\n\t\twidth: 100%;\n\t\theight: 90rpx;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tmargin-bottom: 30rpx;\n\t\tborder-radius: 45rpx;\n\t\tfont-size: 32rpx;\n\t\t\n\t\t.btn-icon {\n\t\t\twidth: 40rpx;\n\t\t\theight: 40rpx;\n\t\t\tmargin-right: 16rpx;\n\t\t}\n\t\t\n\t\t&::after {\n\t\t\tborder: none;\n\t\t}\n\t}\n\t\n\t.wechat-btn {\n\t\tbackground: #07c160;\n\t\tcolor: #fff;\n\t}\n\t\n\t.phone-btn {\n\t\tbackground: #333;\n\t\tcolor: #fff;\n\t}\n}\n\n.agreement {\n\tposition: fixed;\n\tleft: 40rpx;\n\tright: 40rpx;\n\tbottom: 40rpx;\n\tdisplay: flex;\n\talign-items: center;\n\t\n\t.agreement-text {\n\t\tfont-size: 24rpx;\n\t\tcolor: #666;\n\t\tmargin-left: 12rpx;\n\t\t\n\t\t.link {\n\t\t\tcolor: #07c160;\n\t\t}\n\t}\n}\n</style>","import MiniProgramPage from 'D:/2大花/毕业设计/Compus/pages/user/user-login/user-login.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni"],"mappings":";;;AA2CA,MAAK,YAAU;AAAA;AAAA,EAEd,OAAO;AACN,WAAO;AAAA,MACN,SAAS;AAAA,MACT,SAAS;AAAA,IACV;AAAA,EACA;AAAA,EACD,SAAS;AAAA,IACR,kBAAkB;AACjB,WAAK,UAAU,CAAC,KAAK;AAAA,IACrB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAuED,aAAa;AACZ,UAAI,CAAC,KAAK,SAAS;AAClB,eAAOA,cAAAA,MAAI,UAAU;AAAA,UACpB,OAAO;AAAA,UACP,MAAM;AAAA,SACN;AAAA,MACF;AACAA,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAK;AAAA,OACL;AAAA,IACD;AAAA,IACD,oBAAoB;AACnBA,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAK;AAAA,OACL;AAAA,IACD;AAAA,IACD,oBAAoB;AACnBA,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAK;AAAA,OACL;AAAA,IACF;AAAA,EACD;AACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;AClJA,GAAG,WAAW,eAAe;"}